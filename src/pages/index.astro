---
import Layout from "@/layouts/Base.astro"
import  { BaseHead, OGType  }from "@/components/BaseHead";
import  { HeroSection}from "@/components/HeroSection";
import  { ApproachPreview}from "@/components/ApproachPreview";
import  Wave from "@/components/Wave.astro";
import  {Section }from "@/components/PageSection";
import  {IconCard }from "@/components/IconCard";
import { getEntry } from 'astro:content';
import { Button } from "@/components/ui/button";

interface Props  {
  logoLink: "/"
}

const { logoLink = "/" } = Astro.props;
const entry = await getEntry("LandingPage", "index")
const { data } = entry
const { sections, bannerImageURL } = data;
const { hero, challenges,concepts, approach, about, services, case_study, main_cta } = sections;

import { getImage } from "astro:assets";

const optimizedBackground = await getImage({src: bannerImageURL, format: 'webp'});

---
<Layout {logoLink}  {...data}>
  <BaseHead 
    slot="og:data" 
    url={Astro.url}
    type={OGType.WEBSITE} 
    {...data}

  />
  <Fragment slot="hero">
    <HeroSection bannerImageURL={optimizedBackground.src} {...hero} />
    <Wave class="bg-primary"/>
  </Fragment>
  <section class="py-16">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-8">Your Blueprint for Ecosystem Mastery</h2>
      <ApproachPreview items={approach.items} />
    </div>
  </section>
  <Section title={challenges.title} subtitle={challenges.subtitle}>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {challenges.items.map((item) => (
      <IconCard {...item} />
      ))}
    </div>
  </Section>
  <Section title={concepts.title} className="bg-secondary">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      {concepts.items.map((item) => (
      <IconCard {...item} />
      ))}
    </div>
  </Section>
  <Section title={approach.title} subtitle={approach.subtitle}>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {approach.items.map((item) => (
      <IconCard {...item} />
      ))}
    </div>
  </Section>
  <Section title={about.title} subtitle={about.subtitle} className="bg-muted">
    <div class="max-w-3xl mx-auto">
      <p class="text-lg mb-6">yeehaa is a visionary ecosystem architect and black ocean navigator, blending expertise in philosophy, technology, and innovative market concepts to transform organizations and conquer new frontiers.</p>
      <ul class="list-disc list-inside mb-6">
        {about.key_points.map((point)=> <li>{point}</li>)}
      </ul>
    </div>
  </Section>
  <Section title={services.title}>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

      {services.items.map((item) => (
      <IconCard {...item} />
      ))}
    </div>
  </Section>
  <Section title={case_study.title} subtitle={case_study.subtitle} className="bg-accent text-accent-foreground">
  <div class="max-w-3xl mx-auto">
    <p class="text-lg mb-6">{case_study.description}</p>
      <ul class="list-disc list-inside mb-6">
        {case_study.key_results.map((result)=> <li>{result}</li>)}
      </ul>
    <Button variant="secondary" asChild>
      <a href={case_study.cta.action}>{case_study.cta.text}</a>
    </Button>
  </div>
  </Section>
  <Section title={main_cta.title} subtitle={main_cta.subtitle}>
    <div class="text-center">
      <Button size="lg" asChild>
        <a href={main_cta.cta.action}>{main_cta.cta.text}</a>
      </Button>
    </div>
  </Section>
</Layout>
