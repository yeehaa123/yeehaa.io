---
import { BaseHead, OGType} from "@/components/BaseHead";
import Layout from "../layouts/Base.astro"
import { PostListing } from "../components/Postlisting"
const title = "YEEHAA";

import { getCollection } from 'astro:content';

const posts = (await getCollection('Posts')).filter(({data}) => !data.draft)
.sort((a, b) => {
  if(a.data.publishedAt && b.data.publishedAt) {
    return b.data.publishedAt.getTime() - a.data.publishedAt.getTime();
  } else {
    return -1
  }
});

const type = OGType.WEBSITE;
const description = "Jan Hein Hoogstad's personal website"
const { url } = Astro;
---

<Layout {title}>
  <BaseHead slot="og:data" {type} {title} {description} {url} />
    { posts.map(({slug, data}) => <PostListing {...data} {slug}/>)}
</Layout>
