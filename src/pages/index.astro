---
import Layout from "../layouts/Article.astro"
import PostListing from "../components/PostListing.astro"
const title = "YEEHAA";

import { getCollection } from 'astro:content';

const posts = (await getCollection('Posts'))
.filter(({data}) => !data.draft)
.sort((a, b) => {
  if(a.data.publishedAt && b.data.publishedAt) {
    return b.data.publishedAt.getTime() - a.data.publishedAt.getTime();
  } else {
    return -1
  }
  });
---

<Layout {title}>
  { posts.map(({data, slug}) => <PostListing {slug} {...data} />)}
</Layout>
